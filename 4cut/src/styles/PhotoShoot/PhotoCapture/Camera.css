.camera-container {
    position: relative;
    width: 100%;
    height: 100%;
    /* Use Grid to stack children (video & canvas) on top of each other */
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    place-items: center; /* Center content */
    overflow: hidden;
    /*background-color: #000;*/
}

.camera-container .video-container,
.camera-container .canvas-container {
    /* Both occupy the same cell */
    grid-area: 1 / 1 / 2 / 2;
    
    /* Layout properties */
    max-width: 100%;
    max-height: 100%;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.fit-to-width{
    width: 100%;
}

.fit-to-height{
    height: 100%;
}

.camera-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Default State: Canvas is hidden */
.camera-container .canvas-container {
    visibility: hidden;
    opacity: 0;
    z-index: 2; /* Canvas sits on top when visible */
}

/* Captured State: Canvas visible, Video hidden (but rendered) */
.camera-container.canvas-visible .canvas-container {
    visibility: visible;
    opacity: 1;
}

/* [수정] 깜빡임 완전 제거: 비디오를 숨기지 않고 캔버스가 그 위를 덮도록 유지함.
   display: none이나 visibility: hidden을 사용하면 리플로우로 인해 깜빡임이 발생할 수 있음. */
/* .camera-container.canvas-visible .video-container {
    display: none;
} */

.captured-image {
    width: 100%;
    height: 100%;
    /* border-radius removed as container handles it */
    object-fit: contain;
}

.countdown {
    position: absolute;
    /* Ensure countdown is above everything */
    z-index: 10;
    grid-area: 1 / 1 / 2 / 2;
    
    font-size: 120px;
    color: white;
    font-weight: 700;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    font-feature-settings: "tnum";
    font-variant-numeric: tabular-nums;
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes popIn {
    0% { transform: scale(0.5); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}